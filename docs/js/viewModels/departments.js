/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * @ignore
 */
define(["accUtils","jquery","knockout","ojs/ojarraydataprovider","ojs/ojcontext","ojs/ojknockouttemplateutils","ojs/ojconverter-number","ojs/ojdatagrid","ojs/ojfilmstrip","ojs/ojchart","ojs/ojpagingcontrol","ojs/ojformlayout"],(function(t,e,s,a,o,r,n){return function(){this.KnockoutTemplateUtils=r,this.dataReady=s.observable(!1),this.accountingCount=s.observable(0),this.researchCount=s.observable(0),this.salesCount=s.observable(0),this.operationsCount=s.observable(0),this.pagingModel=s.observable(),this.depts=s.observableArray(),this.getItemInitialDisplay=function(t){return t<1?"":"none"},fetch("https://apex.oracle.com/pls/apex/oraclejet/hr/employees/").then(t=>t.json()).then(t=>{this.processEmpData(t)}),this.deptTotals=s.observableArray([]),this.chartDataProvider=new a(this.deptTotals,{keyAttributes:"id"}),this.totalSalary=0,this.processEmpData=t=>{let e=t.items;this.deptTotals([{id:0,series:"Accounting",group:"Department",value:0},{id:1,series:"Research",group:"Department",value:0},{id:2,series:"Sales",group:"Department",value:0},{id:3,series:"Operations",group:"Department",value:0}]),e.forEach(t=>{switch(t.deptno){case 10:this.totalSalary+=t.sal,this.deptTotals()[0].value+=t.sal,this.accountingCount(this.accountingCount()+1);break;case 20:this.totalSalary+=t.sal,this.deptTotals()[1].value+=t.sal,this.researchCount(this.researchCount()+1);break;case 30:this.totalSalary+=t.sal,this.deptTotals()[2].value+=t.sal,this.salesCount(this.salesCount()+1);break;case 40:this.totalSalary+=t.sal,this.deptTotals()[3].value+=t.sal,this.operationsCount(this.operationsCount()+1);break;default:console.log("Unknown department: "+t.deptno)}})},this.getEmpCount=t=>{switch(t){case"accounting":return this.accountingCount();case"research":return this.researchCount();case"sales":return this.salesCount();case"operations":return this.operationsCount();default:return 0}},this.usdNumberConverter=new n.IntlNumberConverter({style:"currency",currency:"USD",currencyDisplay:"code",pattern:"Â¤ ##,##0.00"}),this.dgDataProvider=s.observable(),e.getJSON("https://apex.oracle.com/pls/apex/oraclejet/hr/departments/").then(t=>{let e=[],s=t.items.map(t=>(e.push({name:t.dname.toLowerCase(),loc:t.loc.toLowerCase()}),{deptno:t.deptno,dname:t.dname,loc:t.loc}));this.depts(e),this.dgDataProvider(new a(s,{keyAttributes:"deptno"})),this.dataReady(!0);let r=document.getElementById("deptFilmstrip");o.getContext(r).getBusyContext().whenReady().then(()=>{this.pagingModel(r.getPagingModel())})}),this.styleName=t=>(t=t.toLowerCase()).charAt(0).toUpperCase()+t.slice(1),this.getCellClassName=t=>{let e=t.keys.column;return"deptno"===e?"oj-helper-justify-content-right small-cell":"dname"===e||"loc"===e?"oj-sm-justify-content-flex-start med-cell":""},this.getCellWidth=t=>{let e=t.data;return"deptno"===e?"width:20%":"dname"===e||"loc"===e?"width:40%":""},this.connected=()=>{t.announce("Department content loaded","assertive"),document.title="Intro - Departments"},this.disconnected=()=>{},this.transitionCompleted=()=>{}}}));