<!--
 Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 The Universal Permissive License (UPL), Version 1.0
 -->
 <div class="oj-hybrid-padding">
  <div id="mainContainer" class="oj-flex" style="width: 100%;">
    <div class="oj-flex oj-flex-item oj-sm-12 oj-sm-flex-direction-column">
      <div class="oj-flex-item">
        <h3>Individual Department Information</h3>
      </div>
      <oj-bind-if test="[[dataReady]]">
        <div class="oj-flex oj-sm-flex-items-initial oj-sm-justify-content-center">
          <div class="oj-flex-item fs-container">
            <oj-film-strip id="deptFilmstrip" aria-label="Department information" max-items-per-page="1"
              arrow-visibility="hidden" class="demo-stretch-items" data-oj-context
              style="height: 200px; max-width: 500px;">
              <oj-bind-for-each data="[[depts]]">
                <!-- Layout for filmstrip panel content -->
                <template data-oj-as="depts">
                  <div class="oj-panel demo-filmstrip-item" :style.display="[[getItemInitialDisplay(depts.index)]]">
                    <div class="oj-flex oj-sm-flex-items-initial oj-sm-justify-content-center">
                      <div class="oj-flex-item oj-sm-flex-items-initial oj-sm-justify-content-center"
                        style="min-width: 400px;">
                        <img :src="[['css/images/'+depts.data.name+'.svg']]" role="presentation" alt=""
                          class="item-image" />
                        <div class="item-title" aria-label="department name">
                          <oj-bind-text value="[[styleName(depts.data.name)]]"></oj-bind-text>
                        </div>
                        <div class="item-location" aria-label="deparment location">
                          <oj-bind-text value="[[styleName(depts.data.loc)]]"></oj-bind-text>
                        </div>
                        <div class="item-count" aria-label="total employes in department">
                          <oj-bind-text value="[[getEmpCount(depts.data.name)+ ' employees']]"></oj-bind-text>
                        </div>
                      </div>
                      <div class="oj-flex-item item-title">
                      </div>
                    </div>
                  </div>
                </template>
                <!-- end layout -->
              </oj-bind-for-each>
            </oj-film-strip>
          </div>
        </div>
        <div class="oj-flex oj-sm-flex-items-initial oj-sm-justify-content-center">
          <div class="oj-flex-item">
            <div style="text-align: center;">
              <div style="display: inline-block;margin-top: 4px;">
                <oj-paging-control id="pagingControl" aria-controls="deptFilmstrip" data="[[pagingModel]]" page-size="0"
                  page-options='{"type": "dots"}'>
                </oj-paging-control>
              </div>
            </div>
          </div>
        </div>
      </oj-bind-if>
    </div>
    <div class="oj-flex-item oj-flex">
      <div class="oj-flex-item">
        <h3 id="gridLabel">Grid of department details</h3>
        <oj-data-grid id="datagrid" style="width:100%; min-width: 400px; height:200px;margin-bottom:5px"
          aria-labelledby="gridLabel" data="[[dgDataProvider]]" header.column.style="[[getCellWidth]]"
          header.column.renderer="[[KnockoutTemplateUtils.getRenderer('header_template')]]"
          cell.renderer="[[KnockoutTemplateUtils.getRenderer('cell_template')]]" cell.class-name="[[getCellClassName]]">
        </oj-data-grid>
​
        <script type="text/html" id="header_template">
          <oj-bind-if test="[[$context.key=='deptno']]">
            <span>
              <oj-bind-text value="[['Id']]"></oj-bind-text>
            </span>
          </oj-bind-if>
          <oj-bind-if test="[[$context.key=='dname']]">
            <span>
              <oj-bind-text value="[['Name']]"></oj-bind-text>
            </span>
          </oj-bind-if>
          <oj-bind-if test="[[$context.key=='loc']]">
            <span>
              <oj-bind-text value="[['Location']]"></oj-bind-text>
            </span>
          </oj-bind-if>                          
        </script>
​
        <script type="text/html" id="cell_template">
          <oj-bind-if test="[[$context.keys.column=='deptno']]">
            <span>
              <oj-bind-text value="[[$data]]"></oj-bind-text>
            </span>
          </oj-bind-if>
          <oj-bind-if test="[[$context.keys.column=='dname']]">
            <span>
              <oj-bind-text value="[[$data]]"></oj-bind-text>
            </span>
          </oj-bind-if>
          <oj-bind-if test="[[$context.keys.column=='loc']]">
            <a :href="[['https://maps.google.com/?q='+$data]]" target="_blank" aria-describedby="description">
              <oj-bind-text value="[[$data]]"></oj-bind-text>
            </a>
            <span id="description" style="display:none">link will open in new browser window</span>
          </oj-bind-if>   
        </script>
      </div>
      <div class="oj-flex-item oj-sm-margin-4x-horizontal">
        <h3>Salary by Department</h3>
        <oj-chart id="pieChart" type="bar" data="[[chartDataProvider]]" aria-label="salary totals by department"
          animation-on-display="auto" animation-on-data-change="auto"
          value-formats.value.converter="[[usdNumberConverter]]" value-formats.value.scaling="none" hover-behavior="dim"
          style="width:100%;height:200px;">
          <template slot='itemTemplate' data-oj-as='item'>
            <oj-chart-item value='[[item.data.value]]' group-id='[[ [item.data.group] ]]'
              series-id='[[item.data.series]]'>
            </oj-chart-item>
          </template>
        </oj-chart>
      </div>
    </div>
  </div>
</div>